<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Automation Tech Stack - Auditing</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #e8f5e9;
      margin: 0;
      padding: 0;
      color: #1b5e20;
    }
    .container {
      max-width: 700px;
      background-color: #ffffff;
      margin: 50px auto;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      border: 2px solid #4caf50;
    }
    h1 {
      text-align: center;
      color: #2e7d32;
    }
    p.description {
      text-align: center;
      font-size: 14px;
      color: #33691e;
      margin-bottom: 20px;
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 15px;
      color: #1b5e20;
    }
    input[type="text"] {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #a5d6a7;
      border-radius: 5px;
      font-size: 14px;
    }
    .list-section {
      background-color: #f1f8e9;
      padding: 10px;
      margin-top: 10px;
      border-radius: 5px;
      border: 1px solid #c8e6c9;
    }
    button {
      background-color: #4caf50;
      color: white;
      border: none;
      padding: 8px 14px;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }
    button:hover {
      background-color: #388e3c;
    }
    .definition {
      margin-top: 25px;
      background-color: #e8f5e9;
      border-left: 5px solid #4caf50;
      padding: 10px;
      border-radius: 5px;
    }
    ul {
      list-style-type: disc;
      margin-left: 20px;
    }
    .submit-btn {
      display: block;
      width: 100%;
      background-color: #2e7d32;
      margin-top: 25px;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Automation Tech Stack - Auditing</h1>
    <p class="description">
      This form is intended to gather information about the AI and automation tools currently in use across departments. 
      The data collected will help us document existing technologies and identify opportunities for improvement, 
      efficiency gains, and time savings.
    </p>

    <form id="auditForm">
      <label for="name">Full Name:</label>
      <input type="text" id="name" name="name" placeholder="Enter your full name" required>

      <label for="department">Department / Position:</label>
      <input type="text" id="department" name="department" placeholder="e.g., Marketing / Operations Manager" required>

      <label for="aiTools">
        Please list the AI or automation tools currently being used by you or your department.  
        <br><small>(Add one tool at a time to ensure clarity and completeness.)</small>
      </label>
      <input type="text" id="aiToolInput" placeholder="Enter AI or automation tool name">
      <button type="button" onclick="addTool()">Add Tool</button>

      <div class="list-section" id="aiToolsList">
        <em>No tools have been added yet.</em>
      </div>

      <div class="definition">
        <strong>Definition — AI / Automation Tools:</strong>
        <p>
          Artificial Intelligence (AI) and automation tools are digital systems that perform tasks with minimal human input. 
          They streamline processes, reduce manual workload, and enhance overall efficiency within an organization.
        </p>
      </div>

      <label for="automation">
        What processes or tasks within your department could be improved or automated?  
        <br><small>(Think of repetitive, time-consuming, or manual tasks — add one at a time.)</small>
      </label>
      <input type="text" id="automationInput" placeholder="Enter process or task to automate">
      <button type="button" onclick="addAutomation()">Add Task</button>

      <div class="list-section" id="automationList">
        <em>No potential automation tasks have been added yet.</em>
      </div>

      <button type="submit" class="submit-btn">Submit Form</button>
    </form>
  </div>

  <script>
    const aiTools = [];
    const automations = [];

    function renderList(listId, items, emptyMsg) {
      const listDiv = document.getElementById(listId);
      if (items.length === 0) {
        listDiv.innerHTML = `<em>${emptyMsg}</em>`;
        return;
      }
      listDiv.innerHTML = '<ul>' + items.map(item => `<li>${item}</li>`).join('') + '</ul>';
    }

    function addTool() {
      const input = document.getElementById('aiToolInput');
      const value = input.value.trim();
      if (value) {
        aiTools.push(value);
        renderList('aiToolsList', aiTools, 'No tools have been added yet.');
        input.value = '';
      } else {
        alert('Please enter a tool name.');
      }
    }

    function addAutomation() {
      const input = document.getElementById('automationInput');
      const value = input.value.trim();
      if (value) {
        automations.push(value);
        renderList('automationList', automations, 'No potential automation tasks have been added yet.');
        input.value = '';
      } else {
        alert('Please enter a task to automate.');
      }
    }

    document.getElementById('auditForm').addEventListener('submit', async function(e) {
      e.preventDefault();

      const formData = {
        name: document.getElementById('name').value,
        department: document.getElementById('department').value,
        aiTools,
        automations,
        submittedAt: new Date().toISOString(),
      };

      try {
        const response = await fetch('https://n8n-14lp.onrender.com/webhook/auditing-tech-stack', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(formData)
        });

        if (response.ok) {
          alert('✅ Thank you! Your response has been successfully submitted.');
          document.getElementById('auditForm').reset();
          aiTools.length = 0;
          automations.length = 0;
          renderList('aiToolsList', aiTools, 'No tools have been added yet.');
          renderList('automationList', automations, 'No potential automation tasks have been added yet.');
        } else {
          alert('⚠️ There was a problem submitting your form. Please try again later.');
        }
      } catch (error) {
        console.error('Submission error:', error);
        alert('⚠️ Unable to connect to the server. Please check your internet connection and try again.');
      }
    });
  </script>
</body>
</html>
